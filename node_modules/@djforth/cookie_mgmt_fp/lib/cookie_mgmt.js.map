{"version":3,"sources":["../src/cookie_mgmt.js"],"names":[],"mappings":";;AAAA,IAAM,CAAC,GAAY,OAAO,CAAC,QAAQ,CAAC;;;;;;AAAC,AAOrC,SAAS,SAAS,CAAC,IAAI,EAAC;;AAEtB,MAAI,QAAQ,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC;;AAAA,AAE3C,MAAI,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,GAAG,CAAC;;AAAC,AAE7C,MAAG,EAAE,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC;;AAAA,AAExB,IAAE,GAAI,EAAE,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAC3B,MAAI,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAA;AAC1C,KAAG,GAAG,AAAC,GAAG,KAAK,CAAC,CAAC,GAAI,QAAQ,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;;AAElD,SAAO,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAA;CACpD;;AAED,SAAS,UAAU,CAAC,IAAI,EAAC;AACvB,MAAG,CAAC,IAAI,EAAE,OAAO,IAAI,CAAA;;AAErB,MAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;AACtB,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,GAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,AAAC,CAAC,CAAC;;AAE5D,SAAO,IAAI,CAAC,WAAW,EAAE,CAAC;CAC3B;;AAED,SAAS,YAAY,CAAC,IAAI,EAAE,IAAI,EAAC;AAC/B,MAAG,CAAC,IAAI,EAAE,OAAO,IAAI,CAAA;AACrB,SAAO,UAAS,CAAC,EAAE,GAAG,EAAC;AACrB,QAAI,UAAU,GAAM,IAAI,SAAI,CAAC,MAAG,CAAA;AAChC,QAAG,GAAG,EAAC;AACL,eAAS,kBAAe,GAAG,MAAG,CAAA;KAC/B;AACD,cAAU,eAAa,IAAI,AAAE,CAAA;AAC7B,YAAQ,CAAC,MAAM,GAAG,UAAU,CAAC;;AAE7B,WAAO,UAAU,CAAA;GAClB,CAAA;CACF;;;;;;;;;AAAA,AASD,SAAS,eAAe,CAAC,IAAI,EAAW;MAAT,IAAI,yDAAC,GAAG;;AAErC,MAAG,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,OAAO,IAAI,CAAC;;AAEpC,MAAI,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;;AAEjC,MAAM,YAAY,GAAG,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC;;;;;;;;AAAA,AAQ7C,WAAS,YAAY,CAAC,CAAC,EAAE,CAAC,EAAC;AACzB,cAAU,GAAG,CAAC,CAAC;AACf,gBAAY,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;GAChC;;AAAA,AAED,WAAS,YAAY,GAAE;AACrB,gBAAY,CAAC,KAAK,EAAE,+BAA+B,CAAC,CAAC;GACtD;;AAAA,AAED,WAAS,QAAQ,GAAE;AACf,WAAO,UAAU,CAAC;GACnB;;AAEH,SAAO;AACL,gBAAY,EAAE,YAAY;AACxB,gBAAY,EAAE,YAAY;AAC1B,YAAQ,EAAE,QAAQ;GACrB,CAAA;CAEF;;AAGD,MAAM,CAAC,OAAO,GAAG,eAAe,CAAC","file":"cookie_mgmt.js","sourcesContent":["const _          = require(\"lodash\");\n/**\n * Cookie Managemnet module.\n * @module @djforth/cookie_mgmt_fp\n */\n\n\nfunction getCookie(name){\n  // no cookie set\n  if (document.cookie.length <= 0) return \"\";\n  // Start of required cookie\n  let st = document.cookie.indexOf(name + \"=\");\n  // If cookie not set\n  if(st === -1) return \"\";\n  // Gets value\n  st  = st + name.length + 1;\n  let end = document.cookie.indexOf(\";\", st)\n  end = (end === -1) ? document.cookie.length : end;\n\n  return unescape(document.cookie.substring(st, end))\n}\n\nfunction setExpires(days){\n  if(!days) return null\n\n  let date = new Date();\n  date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\n  return date.toGMTString();\n}\n\nfunction CookieWriter(name, path){\n  if(!name) return null\n  return function(v, exp){\n    let cookie_str = `${name}=${v};`\n    if(exp){\n      cooke_str+= ` expires=${exp};`\n    }\n    cookie_str += ` path=${path}`\n    document.cookie = cookie_str;\n\n    return cookie_str\n  }\n}\n/**\n * Cookie Management\n * Will default try to read cookie of passed name\n * Will return an object\n * @param {string} Name  - Name of cookie variable.\n * @param {string} path - Default path will default /\n.\n */\nfunction CookieManagment(name, path=\"/\"){\n\n  if(_.isUndefined(name)) return null;\n\n  let cookie_val = getCookie(name);\n\n  const cookieWriter = CookieWriter(name, path)\n\n  /**\n  * This will add or create a new cookie value\n  * @param {string} Value (required) - value you wish to set the cookie.\n  * @param {number} Days (optional)- The number of Days till the cookie will expire\n.\n  */\n  function createCookie(v, d){\n    cookie_val = v;\n    cookieWriter(v, setExpires(d));\n  }\n  /** This will distroy the cookie */\n  function deleteCookie(){\n    cookieWriter(\"nil\", \"Thu, 01 Jan 1970 00:00:01 GMT\");\n  }\n  /** Return the value of the cookie */\n  function getValue(){\n      return cookie_val;\n    }\n\n  return {\n    createCookie: createCookie\n    , deleteCookie: deleteCookie\n    , getValue: getValue\n  }\n\n}\n\n\nmodule.exports = CookieManagment;\n"]}