{"version":3,"sources":["../src/event_listener.js"],"names":["Error","document","body","addEventListener","removeEventListener","parentNode","target","forEach","check","trigger","console","log"],"mappings":"odA0Be,WAAkB,CAC/B,GAAI,UAAJ,CAAc,KAAM,IAAIA,MAAJ,CAAU,eAAV,CAAN,CAEd,GAAI,GAAe,IAAnB,CAGA,MAFAC,UAASC,IAAT,CAAcC,gBAAd,CAA+B,OAA/B,MAEA,CAAO,UAAW,CAChBF,SAASC,IAAT,CAAcE,mBAAd,CAAkC,OAAlC,MACD,CACF,C,mBAjCK,EAAc,aAAgB,OAC7B,cAAU,EAAIC,UAAd,CAD6B,CAE9B,EAAM,EAAIA,UAAV,CAF8B,CAEA,EAAIA,UAFJ,CAG9B,EAAIA,UAAJ,GAAmBJ,SAASC,IAHE,CAGW,IAHX,CAI3B,IAAmB,EAAIG,UAAvB,CAJ2B,CACK,IAIxC,C,CAEK,EAAe,WAAW,CAC9B,MAAO,YAAY,CACjB,GAAI,GAAU,EAAEC,MAAhB,CAEA,EAAQC,OAAR,CAAgB,WAAO,SACfC,KADe,KACRC,OADQ,CAGrB,GADAC,QAAQC,GAAR,CAAY,IAAZ,GACA,CAAI,IAAJ,CACE,MADF,KAEO,CACL,GAAM,GAAM,MAAZ,CADK,GAEI,MACV,CACF,CATD,CAUD,CACF,C","file":"event_listener.js","sourcesContent":["import { isArray, isElement } from \"lodash\";\n\nconst checkParent = (check, elm) => {\n  if (!isElement(elm.parentNode)) return null;\n  if (check(elm.parentNode)) return elm.parentNode;\n  if (elm.parentNode === document.body) return null;\n  return checkParent(check, elm.parentNode);\n};\n\nconst manageEvents = modules => {\n  return function(e) {\n    let element = e.target;\n\n    modules.forEach(mod => {\n      let { check, trigger } = mod;\n      console.log(check(element), element);\n      if (check(element)) {\n        trigger(element, e);\n      } else {\n        const elm = checkParent(check, element);\n        if (elm) trigger(elm, e);\n      }\n    });\n  };\n};\n\nexport default function(modules) {\n  if (!isArray) throw new Error(\"Must be array\");\n\n  var eventHandler = manageEvents(modules);\n  document.body.addEventListener(\"click\", eventHandler, false);\n\n  return function() {\n    document.body.removeEventListener(\"click\", eventHandler, false);\n  };\n}\n"]}