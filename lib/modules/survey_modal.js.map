{"version":3,"sources":["../../src/modules/survey_modal.js"],"names":["checker","require","closeModal","modal","lastFocus","e","preventDefault","target","removeEventListener","setAttribute","focus","closeBtn","close","closer","addEventListener","getElements","el","document","getElementById","dataset","activeElement","openModal","module","exports","check","surveyModal","closeSurveyModal","trigger"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,YAAR,CAAd;;AAEA,IAAMC,aAAa,SAAbA,UAAa,CAACC,KAAD,EAAQC,SAAR,EAAoB;AACrC,SAAO,UAACC,CAAD,EAAK;AACVA,MAAEC,cAAF;AACAD,MAAEE,MAAF,CAASC,mBAAT,CAA6B,OAA7B;AACAL,UAAMM,YAAN,CAAmB,aAAnB,EAAkC,MAAlC;AACAN,UAAMM,YAAN,CAAmB,UAAnB,EAA+B,IAA/B;AACAL,cAAUM,KAAV;AACD,GAND;AAOD,CARD;;AAUA,IAAMC,WAAW,SAAXA,QAAW,CAACC,KAAD,EAAQC,MAAR,EAAiB;AAChCD,QAAME,gBAAN,CAAuB,OAAvB,EAAgCD,MAAhC;AACD,CAFD;;AAIA,IAAME,cAAc,SAAdA,WAAc,CAACC,EAAD,EAAM;AACxB,SAAO;AACLJ,WAAOK,SAASC,cAAT,CAAwBF,GAAGG,OAAH,CAAWjB,UAAnC,CADF;AAEHE,eAAWa,SAASG,aAFjB;AAGHjB,WAAOc,SAASC,cAAT,CAAwBF,GAAGG,OAAH,CAAWhB,KAAnC;AAHJ,GAAP;AAKD,CAND;;AAQA,IAAMkB,YAAY,SAAZA,SAAY,CAAClB,KAAD,EAAS;AACzBA,QAAMM,YAAN,CAAmB,aAAnB,EAAkC,OAAlC;AACAN,QAAMM,YAAN,CAAmB,UAAnB,EAA+B,GAA/B;AACAN,QAAMO,KAAN;AACD,CAJD;;AAMAY,OAAOC,OAAP,GAAiB,YAAI;AACnB,SAAO;AACLC,WAAOxB,QAAQ,EAACyB,aAAa,SAAd,EAAyBC,kBAAkB,cAA3C,EAAR,CADF;AAEHC,aAAS,iBAASX,EAAT,EAAaX,CAAb,EAAe;;AAExBA,QAAEC,cAAF;;AAFwB,yBAOpBS,YAAYC,EAAZ,CAPoB;AAAA,UAItBJ,KAJsB,gBAItBA,KAJsB;AAAA,UAKpBR,SALoB,gBAKpBA,SALoB;AAAA,UAMpBD,KANoB,gBAMpBA,KANoB;;AASxBkB,gBAAUlB,KAAV;AACAQ,eAASC,KAAT,EAAgBV,WAAWC,KAAX,EAAkBC,SAAlB,CAAhB;AACD;AAbI,GAAP;AAeD,CAhBD","file":"survey_modal.js","sourcesContent":["var checker = require('../checker');\n\nconst closeModal = (modal, lastFocus)=>{\n  return (e)=>{\n    e.preventDefault();\n    e.target.removeEventListener('click', this);\n    modal.setAttribute('aria-hidden', 'true');\n    modal.setAttribute('tabindex', '-1');\n    lastFocus.focus();\n  };\n};\n\nconst closeBtn = (close, closer)=>{\n  close.addEventListener('click', closer);\n};\n\nconst getElements = (el)=>{\n  return {\n    close: document.getElementById(el.dataset.closeModal)\n    , lastFocus: document.activeElement\n    , modal: document.getElementById(el.dataset.modal)\n  };\n};\n\nconst openModal = (modal)=>{\n  modal.setAttribute('aria-hidden', 'false');\n  modal.setAttribute('tabindex', '0');\n  modal.focus();\n};\n\nmodule.exports = ()=>{\n  return {\n    check: checker({surveyModal: 'Element', closeSurveyModal: 'ElementClass'})\n    , trigger: function(el, e){\n\n      e.preventDefault();\n      let {\n        close\n        , lastFocus\n        , modal\n      } = getElements(el);\n\n      openModal(modal);\n      closeBtn(close, closeModal(modal, lastFocus));\n    }\n  };\n};\n"]}